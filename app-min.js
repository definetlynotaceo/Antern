var express=require("express"),path=require("path"),mongoose=require("mongoose"),bodyParser=require("body-parser"),cookieParser=require("cookie-parser"),passport=require("passport"),session=require("express-session"),flash=require("connect-flash"),params=require("./params/params"),setUpPassport=require("./setuppassport"),app=express();mongoose.connect(params.DATABASECONNECTION,{useUnifiedTopology:!0,useNewUrlParser:!0,useCreateIndex:!0}),setUpPassport(),app.set("port",process.env.PORT||3e3),app.set("views",path.join(__dirname,"views")),app.set("view engine","ejs"),app.use(bodyParser.urlencoded({extended:!1})),app.use(cookieParser()),app.use(session({secret:"doemlfgddfsoi!gjdsf5684561dsf",resave:!1,saveUninitialized:!1})),app.use(express.static(__dirname+"/public")),app.use(passport.initialize()),app.use(passport.session()),app.use(flash()),app.use("/",require("./routes/web")),app.use("/api",require("./routes/api")),app.listen(app.get("port"),(function(){console.log("Server started on port "+app.get("port"))}));